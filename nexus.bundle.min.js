function preSelectContact(){var t=$(".nexus-my-contacts-person"),n;t.length>0&&(n=t[0],$("#nexus-my-contacts-details").animate({opacity:0,top:"300"},300,function(){$("#nexus-my-contacts-details-description").text($(n).data("description"));$("#nexus-my-contacts-details-tel a").text($(n).data("tel"));$("#nexus-my-contacts-details-tel a").attr("href","tel:"+$(n).data("tel"));$("#nexus-my-contacts-details-mail a").text($(n).data("mail"));$("#nexus-my-contacts-details-mail a").attr("href","mailto:"+$(n).data("mail"));$("#nexus-my-contacts-details-comment textarea").val($(n).data("comment"));$("#nexus-my-contacts-details-comment textarea").attr("name",$(n).data("id"));$(this).css("top","-200px");var i=$(".nexus-my-contacts-filler").parent().parent().height(),t=0;$(".nexus-my-contacts-filler").siblings().each(function(){t+=$(this).outerHeight()});i>t&&$(".nexus-my-contacts-filler").height(i-t+"px")}).stop(!0,!0).animate({opacity:1,top:"0"},300),$(".nexus-my-contacts-person").removeClass("nexus-selected"),$(n).addClass("nexus-selected"))}var nexus=nexus||{},SP=SP||null,infobarData=null,currentUserId,console,reloadPage;nexus.loggedInUserID="";window.console||(console={log:function(){},warn:function(){},error:function(){},time:function(){},timeEnd:function(){}});nexus.gotoPage=function(n){"use strict";var t="";return t=n==="root"?window.location.protocol+"//"+window.location.host:n==="userprofile"?window.location.protocol+"//"+window.location.host+"/pages/MyProfile.aspx":n==="news"?window.location.protocol+"//"+window.location.host+"/pages/News.aspx":n==="appstore"?window.location.protocol+"//"+window.location.host+"/pages/AppStore.aspx":n==="help"?window.location.protocol+"//"+window.location.host+"/help":n,t!==""&&(window.location.href=t),!1};reloadPage=function(){location.reload()};jQuery(document).ready(function(){"use strict";function tt(){var n=new SP.ClientContext.get_current,t=n.get_web(),r=t.get_currentUser(),i,e=window.location.search,f;!ctx||!ctx.rootFolder||(i=decodeURIComponent(ctx.rootFolder));!i||(f=t.getFolderByServerRelativeUrl(i),u=t.getFolderByServerRelativeUrl(i).get_listItemAllFields(),n.load(u,"EffectiveBasePermissions"));o=t.get_lists().getById(_spPageContextInfo.pageListId);n.load(r);n.load(t,"EffectiveBasePermissions");n.load(o,"EffectiveBasePermissions");n.executeQueryAsync(Function.createDelegate(this,it),Function.createDelegate(this,a))}function it(){o.get_effectiveBasePermissions().has(SP.PermissionKind.addListItems)?(nexus.multiFileUpload_checkifUserHasEditPermissions=!0,!!n("#nexus-multi-file-upload-container-panel")&&n("#nexus-multi-file-upload-container-panel").length>0&&n("#nexus-multi-file-upload-container-panel").closest("[id^=MSOZoneCell_").show()):u?u.get_effectiveBasePermissions().has(SP.PermissionKind.addListItems)&&(nexus.multiFileUpload_checkifUserHasEditPermissions=!0,!!n("#nexus-multi-file-upload-container-panel")&&n("#nexus-multi-file-upload-container-panel").length>0&&n("#nexus-multi-file-upload-container-panel").closest("[id^=MSOZoneCell_").show()):(nexus.multiFileUpload_checkifUserHasEditPermissions=!1,!!n("#nexus-multi-file-upload-container-panel")&&n("#nexus-multi-file-upload-container-panel").length>0&&n("#nexus-multi-file-upload-container-panel").closest("[id^=MSOZoneCell_").hide())}function v(){function r(t){nexus.currentUserName=t.d.Title;nexus.currentUserWithDomainName=y(t.d.LoginName,"AccountNameWithDomain");nexus.currentUserAccountName=y(t.d.LoginName,"AccountNameWithoutDomain");n(".nexus-profile-picture").attr("src",nexus.admintoolapi+"user/"+nexus.currentUserAccountName+"/picture");window.location.href.toLowerCase().indexOf("appstore")==-1&&initiateDirectContactWidget()}function u(n){nexus.log(nexus.errorLevels.error,n.responseText,n.status)}n("#userid").val("MD-MAN\\"+nexus.currentUserADFSName);var t=_spPageContextInfo.userId,i=_spPageContextInfo.webAbsoluteUrl+"/_api/web/getuserbyid("+t+")";n.ajax({url:i,contentType:"application/json;odata=verbose",headers:{accept:"application/json;odata=verbose"},success:r,error:u,cache:!0})}function y(n,t){var r=/(adfs[|])([a-zA-Z0-9]+)/,u=/([a-zA-Z-]+)[\\]([a-zA-Z]+)/,i;r.exec(n)!=null?i=r.exec(n):u.exec(n)!=null&&(i=u.exec(n));switch(t){case"AccountNameWithoutDomain":return i[2];case"AccountNameWithDomain":return i[0]}}function e(){var t=165;n(".nexus-infobar-content-container").each(function(){t=t>n(this).outerHeight()?t:n(this).outerHeight()});n(".nexus-campaign-rotator-item").css("height",t)}function i(t,i,r,u){var o=n(i).val(),f;o!=null&&n.each(o,function(i,r){var f=n.grep(u,function(n){return n.ID==r})[0];f!=undefined&&t.push(f)});f=n.grep(r,function(n){return n.Status==3});f!=undefined&&(f.length==1&&t.push(f),f.length>1&&n.grep(f,function(n){t.push(n)}));n.each(t,function(t,i){if(r.length==0&&(i.Status=2),r.length>0){var u=n.grep(r,function(n){return n.ID==i.ID})[0];u==undefined&&(i.Status=2)}});var e=[],s=[],h=[];return n.grep(r,function(n){s.push(n.ID)}),n.grep(u,function(n){h.push(n.ID)}),n.grep(s,function(t){if(n.inArray(t,h)==-1){var i=n.grep(r,function(n){return n.ID==t})[0];isNaN(i.ID)&&(i.ID=null);e.push(i)}}),nexus.log(jsclient.loglevel,e),n.grep(e,function(n){t.push(n)}),nexus.log(jsclient.loglevel,t),t}function ft(){var i=!1,r=n("a.LikeButton").text(),t;r!=""&&(r=="Like"&&(i=!0),t=new SP.ClientContext,EnsureScriptFunc("reputation.js","Microsoft.Office.Server.ReputationModel.Reputation",function(){Microsoft.Office.Server.ReputationModel.Reputation.setLike(t,_spPageContextInfo.pageListId.substring(1,37),_spPageContextInfo.pageItemId,i);t.executeQueryAsync(function(){p()},function(){})}))}function p(){if(_spPageContextInfo.pageListId!==undefined&&_spPageContextInfo.pageItemId!==undefined){var n=new SP.ClientContext(_spPageContextInfo.webServerRelativeUrl),i=n.get_web().get_lists().getById(_spPageContextInfo.pageListId),t=i.getItemById(_spPageContextInfo.pageItemId);n.load(t,"LikedBy","ID","LikesCount");n.executeQueryAsync(Function.createDelegate(this,function(){var r=!0,i=t.get_item("LikedBy"),e=t.get_item("LikesCount"),n,u,f;if(!SP.ScriptHelpers.isNullOrUndefined(i))for(n=0,u=i.length;n<u;n++)f=i[n],f.$1E_1===_spPageContextInfo.userId&&(r=!1);et(r,e)}),Function.createDelegate(this,function(){}))}}function et(t,i){t?n("a.LikeButton").text("Like"):n("a.LikeButton").text("Unlike");var r='<img alt="" src="/_layouts/15/images/LikeFull.11x11x32.png" /> '+String(i);i>0?n(".nexus-icon-like-count").html(r):n(".nexus-icon-like-count").html("")}function ot(){var i=infobarData,g=!1,v,tt,h,u,l,it,o,e,d,rt;if(!!i&&i!=null&&i!=""&&!!i.SnapshotText&&i.SnapshotText!=null&&!!i.SnapshotText.Values&&i.SnapshotText.Values!=null&&i.SnapshotText.Values.length>0){for(var s="",g=0,y=[],nt=[],p=-1,b=-1,s=i.SnapshotText.Text;(p=s.indexOf("<",p+1))!=-1;)y.push(p);while((b=s.indexOf(">",b+1))!=-1)nt.push(b);for(tt=i.SnapshotText.Text,h=0;h<y.length;h++){var r=tt.substring(y[h],nt[h]+1),ut=r.split("#",2).join("#").length,ft=r.substring(ut+1,r.length-1),t=n.grep(i.SnapshotText.Values,function(n){return n.Name===ft});if(!!t){if(u="",t[0].Type=="Number")parseInt(t[0].Value)>0?(l="#",t[0].Name==="Projects"&&(l="/search/pages/projectresults.aspx"),u+=parseInt(t[0].Value==1)?'<a target="_blank" href="'+l+'">'+r.split(";")[1]+"<\/a>":'<a target="_blank" href="'+l+'">'+t[0].Value+" "+t[0].Name+"<\/a>"):u+="<span>"+r.split(";")[0].replace("#","").replace("<","")+"<\/span>";else if(t[0].Type=="Text"){if(t[0].Name=="Contacts")if(!t[0].Value)u+="<span>"+r.split(";")[0].replace("#","").replace("<","")+"<\/span>";else if(t[0].Value.indexOf(";")>0)for(it=r.split(";")[2].indexOf("$"),u+=r.split(";")[2].substring(0,it),o=t[0].Value.split(";"),e=0;e<o.length;e++)u+=e==o.length-1?'<a  href="#bkmrk_myContacts">'+o[e]+"<\/a>.":e==o.length-2?'<a href="#bkmrk_myContacts">'+o[e]+"<\/a> and ":'<a href="#bkmrk_myContacts">'+o[e]+"<\/a>, ";else u+=r.split(";")[1].replace("$","")+' <a href="#bkmrk_myContacts">'+t[0].Value+"<\/a>"}else if(t[0].Type=="Query"){g=!0;var k=new Date,a=k.getDate(),f=k.getMonth(),c=k.getFullYear();f==0?(f=11,c=c-1):f=f-1;f=f+1;d=new Date(c,f,0).getDate();d<a&&(a=d);v="'(contentclass:STS_ListItem_DocumentLibrary  ContentType:document  FileExtension:pdf OR  FileExtension:doc OR   FileExtension:docx  OR   FileExtension:txt OR FileExtension:ppt  OR FileExtension:pptx)  AND LastModifiedTime>="+c+"-"+f+"-"+a+"'&trimduplicates=false&rowlimit=90&clienttype='ContentSearchRegular'";w(v);rt="/search/pages/results.aspx?k=(contentclass:STS_ListItem_DocumentLibrary  ContentType:document  FileExtension:pdf OR  FileExtension:doc OR   FileExtension:docx  OR   FileExtension:txt OR FileExtension:ppt  OR FileExtension:pptx)  AND LastModifiedTime>="+c+"-"+f+"-"+a;u+='<a target="_blank" id="infobar-snapshot-manualsText" href="'+rt+'"><\/a>'}s=s.replace(r,u)}}n("#nexus-infobar-status .nexus-infobar-content-container").html(s);g&&w(v)}}function w(t){n.ajax({type:"GET",async:!1,url:"/_api/search/query?querytext="+t,headers:{accept:"application/json;odata=verbose","content-type":"application/json;odata=verbose","X-RequestDigest":n("#__REQUESTDIGEST").val()},success:function(t){n("#infobar-snapshot-manualsText").text(t.d.query.PrimaryQueryResult.RelevantResults.TotalRowsIncludingDuplicates+" documents")},error:function(n,t,i){nexus.log(jsclient.loglevel,"Error: "+i,n.status)},dataType:"json"})}function ct(){var n=new SP.ClientContext("/content/surveys"),t=n.get_web();l=t.get_currentUser();n.load(l);n.executeQueryAsync(Function.createDelegate(this,lt),Function.createDelegate(this,at))}function lt(){currentUserId=l.get_id()}function at(t,i){nexus.log(jsclient.loglevel,i.get_message());n("#surveyApp").hide();n("#nexus-infobar-welcome .nexus-infobar-content-container").html(infobarData.WelcomeText)}function b(){var i=window.location.protocol+"//"+window.location.host+_spPageContextInfo.siteServerRelativeUrl+"/NewsCenter",n=new SP.ClientContext(i),u=n.get_web().get_lists().getByTitle("Pages"),r=new SP.CamlQuery,t;r.set_viewXml('<View><RowLimit>1<\/RowLimit><Query><Where><And><Eq><FieldRef Name="News_ArticleType" /><Value Type="Choice">News<\/Value><\/Eq><Neq><FieldRef Name="FileLeafRef" /><Value Type="File">news_archieve_home.aspx<\/Value><\/Neq><\/And><\/Where><OrderBy><FieldRef Name=\'Modified\' Ascending=\'False\' /><\/OrderBy><\/Query><\/View>');t=u.getItems(r);n.load(t);n.executeQueryAsync(function(){var n=t.getItemAtIndex(0),r=n.get_item("News_Interest"),u=n.get_item("News_Category");vt(i,"Pages",n.get_fieldValues().ID,["PublishingRollupImage","PublishingPageImage","Title","LinkFilename"],r,u,yt,pt)},function(n,t){nexus.log(jsclient.loglevel,JSON.stringify(t.get_message()))})}function k(t,i,r){n.ajax({url:t,type:"GET",processData:!1,contentType:"application/json;odata=verbose",headers:{Accept:"application/json;odata=verbose"},success:i,error:r})}function vt(n,t,i,r,u,f,e,o){var s=n+"/_api/web/lists/getbytitle('"+t+"')/items("+i+")";k(s,function(n){var t=n.d,i=[],s,h,c;for(s in r)t.hasOwnProperty(r[s])||i.push(r[s]);i.length>0?(h="/FieldValuesAsHtml?$select="+i.join(","),c=t.__metadata.uri+h,k(c,function(n){for(var i in n.d)i!="__metadata"&&(t[i]=n.d[i]);e(t,u,f)},o)):e(t,u,f)},o)}function yt(t,i,r){var f,c,u,l,h;if(!!t){var a=n(t.PublishingPageImage).attr("src"),f="",o="",s="";r&&(o+="&category1="+r.Label);i&&(s+="&interest1="+i.Label);f="";c='<div id="nexus-campaign-rotator-container" style="margin-right: -15px; min-height: 165px;"><\/div>';n("#nexus-infobar-campaign").removeAttr("style");n("#nexus-infobar-campaign").css("padding-left","0");n("#nexus-infobar-campaign").html(c);u=a;u?(u=u.substring(0,u.indexOf("?")),u=u.replace("http://","https://"),l="/Pages/news.aspx?articleid="+t.ID+o+s,f+='<a href="'+l+'" style="padding-left: 0px;"><img class="nexus-campaign-rotator-item" src="'+u+'">'):(h="",h=!o||!s?"/pages/news.aspx?articleid="+t.ID:"/pages/news.aspx?articleid="+t.ID+o+s,f+='<a href="'+h+'">No Image<a>',n("#nexus-campaign-rotator-container").addClass("no-image-nexus-infobar-campaign").text("No image").css("cursor","pointer").click(function(){window.location="/pages/news.aspx?articleid="+t.ID}));n("#nexus-campaign-rotator-container").html(f);e();n(function(){n(window).resize(function(){e()})})}}function pt(n){nexus.log(jsclient.loglevel,JSON.stringify(n))}function r(t,i){var u=[],f,r;n.grep(t,function(n){var t=n.ID;u.push(t.toString())});f=n(i).val();r=[];u&&(r=n(u).not(f).get());r.length>0&&n.each(r,function(i,r){var u=n.grep(t,function(n){return n.ID==r})[0];u!=undefined&&(u.Status=3)})}function wt(){var n=window.navigator.userAgent,r=n.indexOf("MSIE "),u,i,t,f;return r>0?parseInt(n.substring(r+5,n.indexOf(".",r)),10)<10?!0:!1:(u=n.indexOf("Trident/"),u>0)?(i=n.indexOf("rv:"),f=n.substring(i+3,n.indexOf(".",i)),parseInt(n.substring(i+3,n.indexOf(".",i)),10)==11?!1:!0):(t=n.indexOf("Edge/"),t>0)?(f=n.substring(t+5,n.indexOf(".",t)),parseInt(n.substring(t+5,n.indexOf(".",t)),10)==12?!1:!0):!1}function g(){n("input[id*='_csr_sbox']").length>=3?n("input[id*='_csr_sbox']").each(function(){var t=n(this).val();t.indexOf("(contentclass:STS_ListItem_DocumentLibrary  ContentType:document  FileExtension:pdf OR  FileExtension:doc OR   FileExtension:docx  OR   FileExtension:txt OR FileExtension:ppt  OR FileExtension:pptx)")!=-1&&n(this).val("")}):setTimeout(g,500)}function nt(){n("input[id*='_csr_sbox']").length>=3?n("input[id*='_csr_sbox']").each(function(){var t=n(this).val();t.indexOf("(mdtsiteinfositetype:project)")!=-1&&n(this).val("")}):setTimeout(nt,500)}var n=jQuery,o,u,a,s,f,h,t,c,rt,ut,l,st,ht;n("#nexus-navbar-container").length>0&&(n("#sideNavBox").addClass("nexus-navbar-restyle"),n("#sideNavBox").addClass("nexus-navbar-restyle-width"),n("#nexus-navbar-container").append(n("#sideNavBox")));nexus.multiFileUpload_checkifUserHasEditPermissions=!1;a=function(){nexus.multiFileUpload_checkifUserHasEditPermissions=!1;!!n("#nexus-multi-file-upload-container-panel")&&n("#nexus-multi-file-upload-container-panel").length>0&&n("#nexus-multi-file-upload-container-panel").closest("[id^=MSOZoneCell_").hide()};tt();v();nexus.closeAllOpenPopups=function(t){n(".nexus-opened").each(function(){t!=this&&n(this).click()})};n("html").on("click",function(){nexus.closeAllOpenPopups()});nexus.setProfileMaxWidth=function(){var t=n("#nexus-toolbar-icons").offset().left-n(".nexus-profile-dropdown").offset().left-n("#nexus-site-menu").width()-32;n("#nexus-profile-dropdown .ms-core-menu-root").css("max-width",t)};nexus.setAppStoreWidgetSize=function(){n(".nexus-widget-app-store-fixed-size").each(function(){var t=n(this).find(".nexus-icon-header"),i=n(t).width()-parseInt(n(t).css("padding-left"))-parseInt(n(t).css("padding-right"));n(this).find(".nexus-icon-header h3").width(i+"px")})};nexus.resizeDivs=function(){n(".nexus-resize-height").each(function(){var t=n("#"+n(this).data("resize-height-target-id")).height();n(this).height(t+"px")})};n(".nexus-resize-height").length>0&&nexus.resizeDivs();n(window).resize(function(){nexus.setProfileMaxWidth();nexus.setAppStoreWidgetSize();n(".nexus-resize-height").length>0&&nexus.resizeDivs()});n(".nexus-content-margin").length===0&&(n("#DeltaPlaceHolderMain").css("padding","10px 20px 20px 20px"),n("td > .ms-webpart-zone").length!==0&&(n(".nexus-content [id^=WebPartWPQ]").css("padding","20px"),n(".nexus-content [id^=WebPartWPQ]").css("box-shadow","0 0 8px rgba(0, 0, 0, 0.1)")),n(".ms-webpartzone-cell").length===0?(n("<style type='text/css'> .ms-dialog .nexus-content { box-shadow: none !important;} <\/style>").appendTo("head"),n(".nexus-content").css("background-color","white"),n(".nexus-content").css("padding","0 20px 20px 20px"),n(".nexus-content").css("box-shadow","0 0 8px rgba(0, 0, 0, 0.1)")):n(".ms-webpartzone-cell").each(function(){n(this).css("padding","20px");n(this).css("background-color","white")}),n("#sideNavBox").addClass("nexus-navbar-restyle"),n("#nexus-navbar-no-page-layout-container").append(n("#sideNavBox")),n("#nexus-breadbrumb").css({margin:"0","padding-left":"10px"}));n("#nexus-toolbar-menu-button").click(function(t){t.stopPropagation();nexus.closeAllOpenPopups(this);n("#nexus-main-menu-arrow").fadeToggle(100);var i=n("#nexus-main-menu");return i.slideToggle(150,function(){n("#nexus-main-menu").is(":visible")?n("#nexus-toolbar-menu-button").addClass("nexus-opened"):n("#nexus-toolbar-menu-button").removeClass("nexus-opened")}),!1});n("#nexus-main-menu").click(function(n){n.stopPropagation()});nexus.getMainMenu(function(t){var i,r,u,f;if(t){for(i="<ul>",r=0;r<t.length;r++)if(t[r].Url)i+="<li>",i+="<a href='"+t[r].Url+"'>"+t[r].Title+"<\/a>",i+="<\/li>";else if(t[r].SubItems){for(i+="<li>",i+="<a href='#' class='nexus-main-menu-open-submenu'>",i+=t[r].Title+"<span class='nexus-icon-menu-open'><\/span>",i+="<\/a>",i+="<ul class='nexus-main-menu-submenu'>",u=0;u<t[r].SubItems.length;u++)i+="<li>",i+='<a target="_blank" href=\''+t[r].SubItems[u].Url+"'>"+t[r].SubItems[u].Title+"<\/a>",i+="<\/li>";i+="<\/ul>";i+="<\/li>"}i+="<\/ul>";f=n("#nexus-main-menu");f.append(i);var e=function(n){n.css("height","");n.css("overflow-y","");var i=n.offset().top,r=window.innerHeight,t=r-i,u=n.height();u>t&&(n.css("height",t+"px"),n.css("overflow-y","scroll"))},o=function(n){n.removeClass("nexus-expanded");n.next("ul").removeClass("nexus-expanded");n.closest("li").removeClass("nexus-expanded");n.next("ul").slideUp(150,function(){e(f)});n.children("span").removeClass("nexus-rotated")},s=function(n){n.addClass("nexus-expanded");n.next("ul").addClass("nexus-expanded");n.closest("li").addClass("nexus-expanded");n.next("ul").slideDown(150,function(){e(f)});n.children("span").addClass("nexus-rotated")};n(".nexus-main-menu-open-submenu").on("click",function(){var t=n(this),i=n("#nexus-main-menu li.nexus-expanded .nexus-main-menu-open-submenu");i.each(function(){this===t.get(0)||o(n(this))});t.hasClass("nexus-expanded")?o(t):s(t)})}});n("#nexus-toolbar-menu-buttontool a").eq(0).click(function(t){return t.stopPropagation(),nexus.closeAllOpenPopups(this),n("#nexus-main-menu-arrow1").removeAttr("position"),n("#nexus-main-menu1").removeAttr("position"),n("#nexus-main-menu-arrow1").fadeToggle(100),n("#nexus-main-menu1").slideToggle(150,function(){n("#nexus-main-menu1").is(":visible")?n("#nexus-toolbar-menu-buttontool a").eq(0).addClass("nexus-opened"):n("#nexus-toolbar-menu-buttontool a").eq(0).removeClass("nexus-opened")}),!1});n("#nexus-main-menu1").click(function(n){n.stopPropagation()});nexus.getMainMenu2(function(t){if(t){for(var u,i="<ul>",r=0;r<t.length;r++)if(t[r].Url)i+="<li>",i+='<a target="_blank" href=\''+t[r].Url+"'>"+t[r].Name+"<\/a>",i+="<\/li>";else if(t[r].SubItems){for(i+="<li>",i+="<a target=\"_blank\" href='#' class='nexus-main-menu-open-submenu'>",i+=t[r].Title+"<span class='nexus-icon-menu-open'><\/span>",i+="<\/a>",i+="<ul class='nexus-main-menu-submenu'>",u=0;u<t[r].SubItems.length;u++)i+="<li>",i+='<a target="_blank" href=\''+t[r].SubItems[u].Url+"'>"+t[r].SubItems[u].Title+"<\/a>",i+="<\/li>";i+="<\/ul>";i+="<\/li>"}i+="<\/ul>";n("#nexus-main-menu1").append(i)}});n("#nexus-toolbar-notifications-area").click(function(t){return t.stopPropagation(),nexus.closeAllOpenPopups(this),n("#nexus-toolbar-notifications-popup-arrow").fadeToggle(150),n("#nexus-toolbar-notifications-popup").slideToggle(250,function(){n("#nexus-toolbar-notifications-popup").is(":visible")?(n("#nexus-toolbar-notifications-area").addClass("nexus-opened"),n("#nexus-toolbar-notifications-area").text()>0&&nexus.clearNotifications()):(n("#nexus-toolbar-notifications-area").removeClass("nexus-opened"),n("#nexus-toolbar-notifications-area").text("0"))}),!1});n("#nexus-toolbar-notifications-popup").click(function(n){return n.stopPropagation(),!1});s=n("#nexus-toolbar-notifications-popup").width();nexus.notificationsCurrentPage=1;nexus.notificationsPageCount=1;nexus.notificationsCount=0;nexus.notificationsMaxPerPage=5;nexus.notificationPopupWidth=s?s:22;nexus.notificationItemHeight=40;nexus.notificationTimeheight=2;nexus.getNotifications(function(t){var u,i,e,o,f,r,s,h;if(t&&t.Items){for(nexus.notificationsCount=t.Items.length,n("#nexus-toolbar-notifications-area").text(nexus.notificationsCount),n("#nexus-toolbar-notifications-navigate-left").addClass("nexus-disabled"),u="<ul style='left: 0px;'>",i=0;i<nexus.notificationsCount;i++)i>0&&i%nexus.notificationsMaxPerPage==0&&(nexus.notificationsPageCount++,u+="<\/ul>\n<ul style='left: "+(nexus.notificationsPageCount-1)*nexus.notificationPopupWidth+"px;'>"),e=/([0-9]{4}-[0-9]{2}-[0-9]{2}T[0-9]{2}:[0-9]{2}:[0-9]{2}).(\d)/g,o=e.exec(t.Items[i].Timestamp),f=new Date(o[1]+"Z"),isNaN(f.getTime())&&(r=t.Items[i].Timestamp.match(/\d+/g),s=Date.UTC(r[0],r[1]-1,r[2],r[3],r[4],r[5]),f=new Date(s)),h=SP.DateTimeUtil.SPRelativeDateTime.getRelativeDateTimeString(f,!0,SP.DateTimeUtil.SPCalendarType.none,!1),u+="<a href='"+t.Items[i].Url+"'><li><span class='nexus-icon-notification'><\/span> "+t.Items[i].Message+'<\/li><li style="padding-left: 35px;cursor:default;">'+h+"<\/li><\/a>\n";u+="<\/ul>";n("#nexus-toolbar-notifications-popup").append(u);nexus.notificationsCount==0?(n("#nexus-toolbar-notifications-navigate").text("No notifications..."),n("#nexus-toolbar-notifications-popup").height(nexus.notificationItemHeight)):nexus.notificationsPageCount==1?(n("#nexus-toolbar-notifications-navigate").hide(),n("#nexus-toolbar-notifications-popup").height(nexus.notificationTimeheight*nexus.notificationsCount*nexus.notificationItemHeight)):n("#nexus-toolbar-notifications-popup").height(nexus.notificationTimeheight*nexus.notificationsMaxPerPage*nexus.notificationItemHeight+nexus.notificationItemHeight)}});nexus.updateNotificationButtons=function(){nexus.notificationsCurrentPage<=1?(n("#nexus-toolbar-notifications-navigate-left").addClass("nexus-disabled"),n("#nexus-toolbar-notifications-navigate-right").removeClass("nexus-disabled")):nexus.notificationsCurrentPage>=nexus.notificationsPageCount?(n("#nexus-toolbar-notifications-navigate-left").removeClass("nexus-disabled"),n("#nexus-toolbar-notifications-navigate-right").addClass("nexus-disabled")):(n("#nexus-toolbar-notifications-navigate-left").removeClass("nexus-disabled"),n("#nexus-toolbar-notifications-navigate-right").removeClass("nexus-disabled"));var t=nexus.notificationsCurrentPage+" / "+nexus.notificationsPageCount;n("#nexus-toolbar-notifications-navigate-info").text(t)};nexus.updateNotificationButtons();n("#nexus-toolbar-notifications-navigate-left").click(function(){return n(this).hasClass("nexus-disabled")||(n("#nexus-toolbar-notifications-popup ul").animate({left:"+="+nexus.notificationPopupWidth},100),nexus.notificationsCurrentPage--,nexus.updateNotificationButtons()),!1});n("#nexus-toolbar-notifications-navigate-right").click(function(){return n(this).hasClass("nexus-disabled")||(n("#nexus-toolbar-notifications-popup ul").animate({left:"-="+nexus.notificationPopupWidth},200),nexus.notificationsCurrentPage++,nexus.updateNotificationButtons()),!1});f=!1;n(document).on("click","table.nexus-selectable tr",function(){if(f){f=!1;return}return n(this).toggleClass("nexus-selected"),n(".nexus-selection-col").each(function(){var t=n(this);t.closest("tr").hasClass("nexus-selected")?t.html("<span class='nexus-icon-check'><\/span>"):t.html("")}),!1});n(document).on("click","table.nexus-selectable a",function(){f=!0});n(document).on("click",".nexus-equipment-menu-heading",function(){var t=n(this).parent().children("ul"),i=n(this).children("span");t.is(":visible")?(t.slideToggle(150),i.removeClass("nexus-icon-open")):(t.slideToggle(150),i.addClass("nexus-icon-open"))});h=250;n(document).on("click",".nexus-scrollable-container .nexus-scrollable-button-up",function(t){t.preventDefault();n(this).siblings(".nexus-scrollable-div").animate({scrollTop:"-="+h+"px"})});n(document).on("click",".nexus-scrollable-container .nexus-scrollable-button-down",function(t){t.preventDefault();n(this).siblings(".nexus-scrollable-div").animate({scrollTop:"+="+h+"px"})});t=null;c=function(){if(n(".nexus-my-contacts-filler").length>0){if(n("#nexus-my-contacts-details").position().top>n("#nexus-my-contacts-persons").position().top)return;var i=n(".nexus-my-contacts-filler").parent().parent().height(),t=0;n(".nexus-my-contacts-filler").siblings().each(function(){t+=n(this).outerHeight()});i>t&&n(".nexus-my-contacts-filler").height(i-t+"px")}};c();n(document).on("mouseover",".nexus-my-contacts-person",function(){if(t=this,!n(t).hasClass("nexus-selected"))return n("#nexus-my-contacts-details").animate({opacity:0,top:"300"},300,function(){n("#nexus-my-contacts-details-description").text(n(t).data("description"));n("#nexus-my-contacts-details-tel a").text(n(t).data("tel"));n("#nexus-my-contacts-details-tel a").attr("href","tel:"+n(t).data("tel"));n("#nexus-my-contacts-details-mail a").text(n(t).data("mail"));n("#nexus-my-contacts-details-mail a").attr("href","mailto:"+n(t).data("mail"));n("#nexus-my-contacts-details-comment textarea").val(n(t).data("comment"));n("#nexus-my-contacts-details-comment textarea").attr("name",n(t).data("id"));n(this).css("top","-200px");c()}).stop(!0,!0).animate({opacity:1,top:"0"},300),n(".nexus-my-contacts-person").removeClass("nexus-selected"),n(".nexus-my-contacts-person").css("background",""),n(t).css("background","#e6f2fa"),n(t).addClass("nexus-selected"),!1});n(document).on("focus","#nexus-my-contacts-comment-form",function(){this.select()});n(document).on("click","#nexus-my-contacts-comment-save",function(){return t===null&&(t=n(".nexus-selected")),t&&(n("#nexus-my-contacts-details-comment-feedback").fadeOut(function(){var t=n("#nexus-my-contacts-details-comment-feedback").data("caption-saving");n("#nexus-my-contacts-details-comment-feedback").hide().html(t).fadeIn(function(){n("#nexus-my-contacts-details-comment-feedback").delay(1e3).fadeOut()})}),nexus.saveMyContactsComment()),!1});n(document).on("click","#nexus-my-contacts-comment-delete",function(){return t===null&&(t=n(".nexus-selected")),t&&(n("#nexus-my-contacts-details-comment textarea").val(""),n("#nexus-my-contacts-details-comment-feedback").fadeOut(function(){var t=n("#nexus-my-contacts-details-comment-feedback").data("caption-removed");n("#nexus-my-contacts-details-comment-feedback").hide().html(t).fadeIn(function(){n("#nexus-my-contacts-details-comment-feedback").delay(1e3).fadeOut()})}),nexus.saveMyContactsComment()),!1});nexus.initMyContacts=function(){n(".nexus-my-contacts-person").length>0&&n(".nexus-my-contacts-person").first().mouseover()};nexus.initMyContacts();n(document).on("click",".nexus-comment-box-save",function(){var t=n(this).parent().parent().find(".nexus-comment-box-feedback"),i;t.fadeOut(function(){var n=t.data("caption-saving");t.hide().html(n).fadeIn(function(){t.delay(1e3).fadeOut(function(){n=t.data("caption-default");t.hide().html(n).fadeIn()})})});i=n(this).parent().parent().find(".nexus-comment-box-form");nexus.saveCalloutComment(i.data("item-id"),i.val());n("a[data-callout-item-id='"+i.data("item-id")+"']").data("callout-comment",i.val())});n(document).on("click",".nexus-comment-box-delete",function(){var t=n(this).parent().parent().find(".nexus-comment-box-feedback"),i;t.fadeOut(function(){var n=t.data("caption-removed");t.hide().html(n).fadeIn(function(){t.delay(1e3).fadeOut(function(){n=t.data("caption-default");t.hide().html(n).fadeIn()})})});i=n(this).parent().parent().find(".nexus-comment-box-form");i.val("");nexus.saveCalloutComment(i.data("item-id"),i.val());n("a[data-callout-item-id='"+i.data("item-id")+"']").data("callout-comment",i.val())});nexus.initCallouts=function(){SP&&SP.SOD.executeFunc("callout.js","Callout",function(){n(".nexus-callout:not(.nexus-initialized)").each(function(){var u,r,t=n(this),i,f;n(this).addClass("nexus-initialized");i=t.closest("article").find(".nexus-callout-content-container");i[0]==undefined&&nexus.log(jsclient.loglevel,"No callout content element found.");f=function(){i.find(".nexus-callout-description").text(t.data("callout-description"));t.data("callout-comment")!=undefined?(i.find(".nexus-comment-box").show(),i.find(".nexus-comment-box-feedback").text(i.find(".nexus-comment-box-feedback").data("caption-default")),i.find(".nexus-comment-box-feedback").show(),nexus.loadComment(i.find(".nexus-comment-box-form"),t.data("callout-item-id")),i.find(".nexus-comment-box-form").val(t.data("callout-comment")),i.find(".nexus-comment-box-form").data("item-id",t.data("callout-item-id"))):i.find(".nexus-comment-box").hide()};u=CalloutManager.createNew({launchPoint:t[0],ID:"callout"+Math.random().toString(),title:t.data("callout-title"),contentElement:i[0],beakOrientation:"leftRight",onOpeningCallback:f});t.data("callout-link1-caption")!=undefined&&(r=new CalloutAction({text:t.data("callout-link1-caption"),onClickCallback:function(){nexus.gotoPage(t.data("callout-link1-url"))}}),u.addAction(r));t.data("callout-link2-caption")!=undefined&&(r=new CalloutAction({text:t.data("callout-link2-caption"),onClickCallback:function(){var n=t.data("callout-link2-url");t.data("callout-link2-target")==="_blank"?window.open(n,"_blank"):nexus.gotoPage(n)}}),u.addAction(r));t.data("callout-link3-caption")!=undefined&&(r=new CalloutAction({text:t.data("callout-link3-caption"),onClickCallback:function(){nexus.gotoPage(t.data("callout-link3-url"))}}),u.addAction(r))})})};nexus.initCallouts();nexus.showPanel=function(t,i){n("#"+t+" > .nexus-panel:visible").length==0?n("#"+t+"-"+i).fadeIn(200):n("#"+t+" > .nexus-panel:visible").fadeOut(200,function(){n("#"+t+"-"+i).fadeIn(200)})};nexus.initDropdowns=function(){n(".nexus-dropdown:not(.nexus-initialized):not(.nexus-dropdown-full-width)").each(function(){for(var r=n(this).find(".nexus-dropdown-list li"),i=n(this).find(".nexus-dropdown-selected-value").outerWidth(!0),u,f,t=0;t<r.length;t++)n(this).find(".nexus-dropdown-selected-value").text(n(r[t]).text()),i=Math.max(i,n(this).find(".nexus-dropdown-selected-value").outerWidth(!0));u=n(this).find(".nexus-dropdown-button").outerWidth(!0);f=10;n(this).find(".nexus-dropdown-selected-value:not(#nexus-project-status-selected-value)").width(i+f+u)});n(".nexus-dropdown:not(.nexus-initialized)").each(function(){n(this).addClass("nexus-initialized");var t=n(this).data("selected-key"),i=n(this).find("[data-key='"+t+"']").text();n(this).find(".nexus-dropdown-selected-value").text(i);nexus.showPanel(n(this).data("panel-base-id"),t);n(this).click(function(t){t.stopPropagation();nexus.closeAllOpenPopups(this);var i=n(this),r=n(this).find(".nexus-dropdown-list");return r.slideToggle(150,function(){r.is(":visible")?i.addClass("nexus-opened"):i.removeClass("nexus-opened")}),!1});n(this).find("li").click(function(t){var r,u,i;if(t.stopPropagation(),r=n(this).data("key"),u=n(this).text(),n(this).closest(".nexus-dropdown").click(),i=n(this).closest(".nexus-dropdown"),i.data("selected-key")!=r)return i.data("selected-key",r),i.find(".nexus-dropdown-selected-value").text(u),nexus.showPanel(i.data("panel-base-id"),r),!1})})};nexus.initDropdowns();nexus.initTextTabs=function(){n(".nexus-text-tabs:not(.nexus-initialized)").each(function(){n(this).addClass("nexus-initialized");var t=n(this).data("selected-key");nexus.showPanel(n(this).data("panel-base-id"),t)})};nexus.initTextTabs();n(document).on("click",".nexus-text-tab",function(){n(this).siblings().removeClass("nexus-selected");n(this).addClass("nexus-selected");var t=n(this).data("key"),i=n(this).closest(".nexus-text-tabs");i.data("selected-key")!=t&&(i.data("selected-key",t),nexus.showPanel(i.data("panel-base-id"),t))});n(".nexus-header-collapsable-caption-show").hide();n(document).on("click",".nexus-header-collapsable",function(t){t.stopPropagation();var i=n(this);return i.closest("header").nextAll("section").each(function(){var t=n(this);t.slideToggle(150,function(){var n=i.find(".nexus-header-collapsable-caption");t.is(":visible")?n.text(n.data("caption-hide")):n.text(n.data("caption-show"))})}),i.find(".nexus-icon-menu-open").toggleClass("nexus-rotated"),!1});nexus.showDialog=function(t,i){var r=document.createElement("div"),u;n(r).html(i+="<p style='margin-top: 1em;'><button style='float:right;' onClick='SP.UI.ModalDialog.commonModalDialogClose();'>Close<\/button><\/p>");u={title:t,html:r,autoSize:!0,showClose:!0,width:360,height:100};SP.SOD.execute("sp.ui.dialog.js","SP.UI.ModalDialog.showModalDialog",u)};nexus.showWelcomeDialog=function(t,i){var r=document.createElement("div"),u;n(r).html(i+="<p style='margin-top: 1em;'><button style='float:right;' onClick='SP.UI.ModalDialog.commonModalDialogClose();'>Close<\/button><\/p>");u={title:t,html:r,autoSize:!0,showClose:!0,width:360,height:300};SP.SOD.execute("sp.ui.dialog.js","SP.UI.ModalDialog.showModalDialog",u)};rt=function(){var t=n(".nexus-widget-header-widget"),i=t.parents(".s4-wpcell-plain");i.addClass("nexus-webpart-header-widget")}();n("#nexus-toolbar-search-button").click(function(){n("#nexus-responsive-search").animate({top:0},300)});n("#nexus-responsive-search-close-button").click(function(){n("#nexus-responsive-search").animate({top:-70},300)});n("#nexus-infobar").length>0&&nexus.getInfobarData(function(t){var u,c,r,i,f,o,s,h,l;if(infobarData=t,n("#nexus-infobar-status .nexus-infobar-content-container").html(t.SnapshotText.Text),ot(),ct(),!t.Campaigns)b();else if(t.Campaigns.length>0){for(u="",c='<div id="nexus-campaign-rotator-container" style="margin-right: -15px; min-height: 165px;"><\/div>',n("#nexus-infobar-campaign").removeAttr("style"),n("#nexus-infobar-campaign").css("padding-left","0"),n("#nexus-infobar-campaign").html(c),r=0;r<t.Campaigns.length;r++)i=t.Campaigns[r].ImageUrl,i=i.substring(0,i.indexOf("?")),!i||(f=t.Campaigns[r].Category,o="&category1=",f!==null&&(o+=f),s=t.Campaigns[r].Interest,h="&interest1=",s!==null&&(h+=s),i=i.replace("http://","https://"),l="/Pages/news.aspx?articleid="+t.Campaigns[r].SharePointID+o+h,u+='<a href="'+l+'" style="padding-left: 0px;"><img class="nexus-campaign-rotator-item" src="'+i+'">');n("#nexus-campaign-rotator-container").html(u);t.Campaigns.length>1&&n("#nexus-campaign-rotator-container").cycleContent({speed:750,displaytime:5e3});e();n(function(){n(window).resize(function(){e()})})}else b()});nexus.getNewsData(function(){});ut="ja";nexus.validateText=function(n){return n.trim()!=""};nexus.validateEmail=function(n){return/^.+@.+$/.test(n)};n(".nexus-form-field-error").each(function(){n(this).hide()});nexus.validateNexusForm=function(t){var i=!0,r=t+" input[type=text]",u=t+" input[type=email]",f=t+" input[type=date]",e=t+" select";return n(r).each(function(){var t=n(this).closest(".nexus-form-field").hasClass("nexus-required"),r=n(this).val();t&&!nexus.validateText(r)?(i=!1,n(this).addClass("nexus-required"),n(this).parent().find(".nexus-form-field-error").text("This field is required").slideDown(150)):(n(this).removeClass("nexus-required"),n(this).parent().find(".nexus-form-field-error").hide(150))}),n(u).each(function(){var t=n(this).closest(".nexus-form-field").hasClass("nexus-required"),r=n(this).val();t&&!nexus.validateEmail(r)?(i=!1,n(this).addClass("nexus-required"),n(this).parent().find(".nexus-form-field-error").text("Not a valid email address").slideDown(150)):(n(this).removeClass("nexus-required"),n(this).parent().find(".nexus-form-field-error").hide(150))}),n(f).each(function(){var t=n(this).closest(".nexus-form-field").hasClass("nexus-required"),r=n(this).val();t?(i=!1,n(this).addClass("nexus-required"),n(this).parent().find(".nexus-form-field-error").text("Please select valid date.").slideDown(150)):(n(this).removeClass("nexus-required"),n(this).parent().find(".nexus-form-field-error").hide(150))}),n(e).each(function(){var t=n(this).closest(".nexus-form-field").hasClass("nexus-required"),r=n(this).val();t&&r==""?(i=!1,n(this).addClass("nexus-required"),n(this).parent().find(".nexus-form-field-error").text("This field is required").slideDown(150)):(n(this).removeClass("nexus-required"),n(this).parent().find(".nexus-form-field-error").hide(150))}),nexus.log(jsclient.loglevel,"Form is valid: "+i),i};window.disableAllPqSelects=function(){n("#dvInterests").pqSelect("disable");n("#dvEquipmntShips").pqSelect("disable");n("#dvEquipmntEngTypes").pqSelect("disable");n("#dvPowerplants").pqSelect("disable");n("#dvTurbochargers").pqSelect("disable")};nexus.setup_placeholders=function(){n.support.placeholder=!1;var t=document.createElement("input");if("placeholder"in t)return n.support.placeholder=!0,function(){};n("#txtdcMessage").on("focus",function(){n(this).val()==="What's on your mind?"&&n(this).val("")}).on("blur",function(){n("#txtdcMessage").val()===""&&n("#txtdcMessage").val("What's on your mind?")}).blur()};nexus.setup_placeholders();n(document).on("click","#nexus-Personalinfo-save",function(){nexus.log(jsclient.loglevel,"Called Personal info save.");var t="",i=n("#nexusPersInfoWdgt input[id=hdUserType]").val();i.toLowerCase()!="Internal user".toLowerCase()&&(t+=t+"gender="+encodeURIComponent(n("#nexusPersInfoWdgt select[name=Gender]").val())+"&firstname="+encodeURIComponent(n("#nexusPersInfoWdgt input[name=FirstName]").val().trim())+"&middlename="+encodeURIComponent(n("#nexusPersInfoWdgt input[name=MiddleName]").val().trim())+"&lastname="+encodeURIComponent(n("#nexusPersInfoWdgt input[name=LastName]").val().trim())+"&jobtitle="+encodeURIComponent(n("#nexusPersInfoWdgt input[name=JobTitle]").val().trim())+"&phone="+encodeURIComponent(n("#nexusPersInfoWdgt input[name=Phone]").val().trim())+"&mobilephone="+encodeURIComponent(n("#nexusPersInfoWdgt input[name=MobilePhone]").val().trim())+"&email="+encodeURIComponent(n("#nexusPersInfoWdgt input[name=Email]").val().trim()),nexus.log(jsclient.loglevel,t),nexus.validateNexusForm("#nexusPersInfoWdgt")&&nexus.UpdatePersonalInfo(t));i.toLowerCase()==="Internal user".toLowerCase()&&(t={ID:nexus.currentUserAccountName,Role:n("#nexusPersInfoWdgt input[id=hdUserRole]").val(),Deputy:n("#nexusPersInfoWdgt select[name=InternalDeputy]").val(),AbsentFrom:n("#nexusPersInfoWdgt input[name=AbsentFrom]").val(),AbsentTo:n("#nexusPersInfoWdgt input[name=AbsentTo]").val()},nexus.log(jsclient.loglevel,t),nexus.validateNexusForm("#divPersInfoEditInterUser")&&nexus.UpdatePersonalInfoInternalUser(t))});n(document).on("click","#nexus-Personalinfo-edit",function(){var t=n("#nexusPersInfoWdgt input[id=hdUserType]").val();t.toLowerCase()==="Internal user".toLowerCase()?nexus.getMyProfile(!1,!0):nexus.getMyProfile(!1,!1)});n(document).on("click","#nexus-Personalinfo-cancel",function(){n("#nexusPersInfoWdgt input[type=text]").each(function(){n(this).removeClass("nexus-required");n(this).parent().find(".nexus-form-field-error").hide(150)});n("#nexusPersInfoWdgt input[type=email]").each(function(){n(this).removeClass("nexus-required");n(this).parent().find(".nexus-form-field-error").hide(150)});nexus.getMyProfile(!1)});n(document).on("click","#nexus-PersCompinfo-save",function(){var i=n("#nexusPersCmpInfoWdgt input[name=SupplierID]").val()==undefined?"":n("#nexusPersCmpInfoWdgt input[name=SupplierID]").val().trim(),t;nexus.log(jsclient.loglevel,"Called Company info save.");t={ID:n("#nexusPersCmpInfoWdgt input[name=CompanydataID]").val(),CustomerID:n("#nexusPersCmpInfoWdgt input[name=CompCustomerNumber]").val(),Address:n("#nexusPersCmpInfoWdgt input[name=CompAddress]").val().trim(),Company:n("#nexusPersCmpInfoWdgt input[name=CompanyName]").val().trim(),PostCode:n("#nexusPersCmpInfoWdgt input[name=CompPostCode]").val().trim(),City:n("#nexusPersCmpInfoWdgt input[name=CompCity]").val().trim(),Country:n("#nexusPersCmpInfoWdgt select[name=CompCountry]").val().trim(),CompanyPhone:n("#nexusPersCmpInfoWdgt input[name=CompanyPhone]").val().trim(),Web:n("#nexusPersCmpInfoWdgt input[name=CompWeb]").val().trim()};i!=""&&(t.SupplierID=i);nexus.log(jsclient.loglevel,t);nexus.validateNexusForm("#nexusPersCmpInfoWdgt")&&nexus.UpdateCompanyInfo(t)});n(document).on("click","#nexus-PersCompinfo-suggest",function(){var t=n("#dvCompnyCountries").val();nexus.loadCountries(t)});n(document).on("click","#nexus-PersCompinfo-cancel",function(){n("#nexusPersCmpInfoWdgt input[type=text]").each(function(){n(this).removeClass("nexus-required");n(this).parent().find(".nexus-form-field-error").hide(150)});nexus.getMyCompanyInfo()});n(document).on("click","#nexus-Get-Interests",function(){window.userinterests=[];nexus.loadUserIntrests();n("#dvInterests").pqSelect("enable");nexus.toggleInterestButtons()});n(document).on("click","#nexus-PersonalInterests-save",function(){var t=[];i(t,"#dvInterests",window.userinterests,window.AllInterests);nexus.log(jsclient.loglevel,t);nexus.UpdateUserInterests(JSON.stringify(t));n("#dvInterests").pqSelect("disable");nexus.toggleInterestButtons()});n(document).on("click","#nexus-PersonalInterests-AddNew",function(){if(nexus.validateNexusForm("#dvAddIntersts")){var t=n("#txtnewInterest").val().trim();t=t.replace(/\s+/g," ");n("#dvInterests option:contains('"+t+"')").length==0?(n("#dvInterests").append(n("<option><\/option>").attr("value",t).text(t).attr("selected",!0)),n("#dvInterests").pqSelect("refreshData"),n("#txtnewInterest").val(""),window.userinterests.push({ID:t,Name:t,Status:1})):nexus.showDialog("Alert","Cannot add same Interest !")}});n(document).on("click","#nexus-Cancel-Interests",function(){nexus.loadUserIntrests();n("#dvInterests").pqSelect("disable");nexus.toggleInterestButtons();n("#txtnewInterest").val("")});n(document).on("click","#nexus-EquipmentInfo-suggest",function(){window.userEquipShips=[];window.userEquipEngines=[];window.userPowerPlants=[];window.userTurbochargers=[];nexus.loadUserShipsEquipments();n("#dvEquipmntShips").pqSelect("enable");n("#dvEquipmntEngTypes").pqSelect("enable");n("#dvPowerplants").pqSelect("enable");n("#dvTurbochargers").pqSelect("enable");nexus.toggleEquipmentInfoButtons()});n(document).on("click","#nexus-EquipmentInfo-save",function(){var t=[],r=[],u=[],f=[];n("#dvEquipmntShips").parent().is(":visible")&&(t=i(t,"#dvEquipmntShips",window.userEquipShips,window.AllEquipShips));n("#dvEquipmntEngTypes").parent().is(":visible")&&(r=i(r,"#dvEquipmntEngTypes",window.userEquipEngines,window.AllEquipEngines));n("#dvPowerplants").parent().is(":visible")&&(u=i(u,"#dvPowerplants",window.userPowerPlants,window.AllPlants));n("#dvTurbochargers").parent().is(":visible")&&(f=i(f,"#dvTurbochargers",window.userTurbochargers,window.AllTurbochargers));n.grep(r,function(n){t.push(n)});n.grep(u,function(n){t.push(n)});n.grep(f,function(n){t.push(n)});console.log(JSON.stringify(t));nexus.UpdateUserEquipments(JSON.stringify(t));n("#dvEquipmntShips").pqSelect("disable");n("#dvEquipmntEngTypes").pqSelect("disable");n("#dvPowerplants").pqSelect("disable");n("#dvTurbochargers").pqSelect("disable");nexus.toggleEquipmentInfoButtons()});n(document).on("click","#nexus-EquipmentInfo-cancel",function(){nexus.loadUserShipsEquipments();n("#txtnewEngine").val("");n("#txtnewShip").val("");n("#dvEquipmntShips").pqSelect("disable");n("#dvEquipmntEngTypes").pqSelect("disable");n("#dvPowerplants").pqSelect("disable");n("#dvTurbochargers").pqSelect("disable");nexus.toggleEquipmentInfoButtons()});n(document).on("click","#nexus-EquipmentsShips-AddNew",function(){if(nexus.validateNexusForm("#dvAddEquipmentShips")){var t=n("#txtnewShip").val().trim();t=t.replace(/\s+/g," ");n("#dvEquipmntShips option:contains('"+t+"')").length==0?(n("#dvEquipmntShips").append(n("<option><\/option>").attr("value",t).text(t).attr("selected",!0)),n("#dvEquipmntShips").pqSelect("refreshData"),n("#txtnewShip").val(""),window.userEquipShips.push({ID:t,Name:t,Status:1,TypeID:2})):nexus.showDialog("Alert","Cannot add same ship again !")}});n(document).on("click","#nexus-EquipmentsEngines-AddNew",function(){if(nexus.validateNexusForm("#dvAddEquipmentEngines")){var t=n("#txtnewEngine").val().trim();t=t.replace(/\s+/g," ");n("#dvEquipmntEngTypes option:contains('"+t+"')").length==0?(n("#dvEquipmntEngTypes").append(n("<option><\/option>").attr("value",t).text(t).attr("selected",!0)),n("#dvEquipmntEngTypes").pqSelect("refreshData"),n("#txtnewEngine").val(""),window.userEquipEngines.push({ID:t,Name:t,Status:1,TypeID:3})):nexus.showDialog("Alert","Cannot add same engine again !")}});n(document).on("click","#nexus-EquipmentsPlant-AddNew",function(){if(nexus.validateNexusForm("#dvAddPowerPlants")){var t=n("#txtnewPowerPlant").val().trim();t=t.replace(/\s+/g," ");n("#dvPowerplants option:contains('"+t+"')").length==0?(n("#dvPowerplants").append(n("<option><\/option>").attr("value",t).text(t).attr("selected",!0)),n("#dvPowerplants").pqSelect("refreshData"),n("#txtnewPowerPlant").val(""),window.userPowerPlants.push({ID:t,Name:t,Status:1,TypeID:3})):alert("Cannot add same plant again!")}});n(document).on("click","#nexus-EquipmentsTC-AddNew",function(){if(nexus.validateNexusForm("#dvAddTurbochargers")){var t=n("#txtnewTurbocharger").val().trim();t=t.replace(/\s+/g," ");n("#dvTurbochargers option:contains('"+t+"')").length==0?(n("#dvTurbochargers").append(n("<option><\/option>").attr("value",t).text(t).attr("selected",!0)),n("#dvTurbochargers").pqSelect("refreshData"),n("#txtnewTurbocharger").val(""),window.userTurbochargers.push({ID:t,Name:t,Status:1,TypeID:3})):alert("Cannot add same turbocharger again!")}});n(document).on("click","#nexus-AboutMe-Edit",function(){n("#divProfileAboutMe").toggleClass("ng-hide");n("#divProfileAboutMeEdit").toggleClass("ng-hide");n("#nexus-AboutMe-Edit").toggleClass("ng-hide");n("#nexus-AboutMe-cancel").toggleClass("ng-hide");n("#nexus-AboutMe-save").toggleClass("ng-hide")});n(document).on("click","#nexus-AboutMe-save",function(){var t="Description="+encodeURIComponent(n("#divProfileAboutMeEdit textarea[name=AboutMeDescription]").val().trim()),i=n("#nexusPersInfoWdgt input[id=hdUserType]").val();i.toLowerCase()==="Internal user".toLowerCase()?nexus.UpdateAboutMedescription(t,!0):nexus.UpdateAboutMedescription(t,!1)});n(document).on("click","#nexus-AboutMe-cancel",function(){nexus.getMyProfile(!0)});p();n("a.LikeButton").click(function(){ft()});st=[];ht=[];window.onLoadFunctionsForMyProfile=function(){if(window.location.pathname.toLowerCase().indexOf("myprofile")>-1){n("#dvInterests").pqSelect({bootstrap:{on:!0},multiplePlaceholder:"Please select",deselect:!0,selectallText:"Select All",checkbox:!0,search:!0,maxDisplay:10,width:400}).on("change",function(){r(window.userinterests,"#dvInterests")});n("#dvEquipmntShips").pqSelect({bootstrap:{on:!0},multiplePlaceholder:"Please select",deselect:!0,selectallText:"Select All",checkbox:!0,search:!0,maxDisplay:10,width:400}).on("change",function(){r(window.userEquipShips,"#dvEquipmntShips")});n("#dvEquipmntEngTypes").pqSelect({bootstrap:{on:!0},multiplePlaceholder:"Please select",deselect:!0,selectallText:"Select All",checkbox:!0,search:!0,maxDisplay:10,width:400}).on("change",function(){r(window.userEquipEngines,"#dvEquipmntEngTypes")});n("#dvPowerplants").pqSelect({bootstrap:{on:!0},multiplePlaceholder:"Please select",deselect:!0,selectallText:"Select All",checkbox:!0,search:!0,maxDisplay:10,width:400}).on("change",function(){r(window.userPowerPlants,"#dvPowerplants")});n("#dvTurbochargers").pqSelect({bootstrap:{on:!0},multiplePlaceholder:"Please select",deselect:!0,selectallText:"Select All",checkbox:!0,search:!0,maxDisplay:10,width:400}).on("change",function(){r(window.userTurbochargers,"#dvTurbochargers")});window.disableAllPqSelects();n(".nexus-required input[type=text]").focusout(function(){var t=nexus.validateText(n(this).val());t&&(n(this).removeClass("nexus-required"),n(this).parent().find(".nexus-form-field-error").hide(150))});n(".nexus-required input[type=email]").focusout(function(){var t=nexus.validateEmail(n(this).val());t&&(n(this).removeClass("nexus-required"),n(this).parent().find(".nexus-form-field-error").hide(150))});n(".nexus-required select").change(function(){n(this).val()!=""?(n(this).removeClass("nexus-required"),n(this).parent().find(".nexus-form-field-error").hide(150)):(n(this).addClass("nexus-required"),n(this).parent().find(".nexus-form-field-error").text("This field is required").slideDown(150))});n("input[id^=N_]").on("keypress",function(t){if(t.which!=32&&t.which!=43&&t.which!=46&&t.which!=45&&t.which!=40&&t.which!=41&&(t.which<48||t.which>57))return!1;if(t.which==43){var i=document.getElementById(n(this)[0].id),r=i.selectionStart;if(r!=0)return!1}})}};window.inRange=function(n){return n>=48&&n<=57||n>=96&&n<=105};window.applyUserPictureUrl_MyContact=function(){n(".nexus-my-contacts .nexus-my-contacts-person").each(function(){var t=n(this).find("img");t.attr("src",nexus.admintoolapi+"user/"+n(this).data("id")+"/picture")})};window.applyUserPictureUrl_ProjectMembers=function(){n("ul[name=nexus-project-members-list] li figure img").each(function(){var t=n(this);t.attr("src",nexus.admintoolapi+"user/"+n(this).data("id")+"/picture")});window.initProjectCharts()};window.applyUserPictureUrl_Mycolleague=function(){n(".nexus-widget section[name=sectMycolleague] ul li img").each(function(){var t=n(this);t.attr("src",nexus.admintoolapi+"user/"+n(this).attr("id")+"/picture")})};window.applyScrollButtons_MyEquipment=function(){var t=n(".nexus-scrollable-div").css("height");!t||Math.floor(t.replace("px",""))>=250&&(n(".nexus-scrollable-button-up").show(),n(".nexus-scrollable-button-down").show())};window.executeOrSkipStatus=function(){for(var i=!1,t=document.getElementsByTagName("script"),n=0;n<t.length;n++)if(!!t[n].getAttribute("src")&&t[n].getAttribute("src").indexOf("angular")>-1){i=!0;break}i&&executeStatus()};window.executeOrSkipSurveys=function(){for(var i=!1,t=document.getElementsByTagName("script"),n=0;n<t.length;n++)if(!!t[n].getAttribute("src")&&t[n].getAttribute("src").indexOf("angular")>-1){i=!0;break}i&&executeSurvey()};window.initProjectCharts=function(){window.location.pathname.toLowerCase().indexOf("project")>-1&&n(".nexus-donut-chart:not(.nexus-initialized)").each(function(){n(this).addClass("nexus-initialized");var i=n(this).prop("id"),r=n(this).data("percentage"),t=["#fff","#313d4a","#e3e3e3"];n(this).hasClass("nexus-donut-chart-red")&&(t=["#e40045","#e40045","#c9003f"]);n(this).hasClass("nexus-donut-chart-yellow")&&(t=["#ffcd00","#ffcd00","#e5b700"]);n(this).hasClass("nexus-donut-chart-green")&&(t=["#91b900","#91b900","#7e9e00"]);n(this).hasClass("nexus-donut-chart-blue")&&(t=["#4b96d2","#4b96d2","#4284b7"]);Circles.create({id:i,radius:40,value:r,maxValue:100,width:20,border:2,text:"",duration:20,colors:t,wrpClass:"circles-wrp",textClass:"circles-text",styleWrapper:!0,styleText:!0})})};window.executeAfterAngularJSloaded=function(){window.executeOrSkipSurveys();window.executeOrSkipStatus()};window.aboutMeInfoWidgetPostLoad=function(){d();kt()};var d=function(){nexus.currentUserAccountName?n("#nexus-profile-info-image").attr("src",nexus.admintoolapi+"user/"+nexus.currentUserAccountName+"/picture"):(n("#nexus-profile-info-image").attr("src",nexus.admintoolapi+"user/undefined/picture"),setTimeout(d,500))},bt=function(n,t,i){var o=new Image,r,u,f,e;return o.src=n.attr("src"),r=o.naturalWidth,u=o.naturalHeight,u>=250&&u<=768&&r>=250&&r<=1024?(f=n.height(),e=n.width(),f<250||e<250?f<e?f:e:250):(u>768&&r>1024?i.show():t.show(),u<r?u:r)},kt=function(){var u=n("#edit-picture-button"),f=n("#nexus-file-upload-panel"),tt=n("#upload-chosen-image"),e=n("#nexus-file-cropping-panel"),t=n("#nexus-profile-info-image-cropping"),o=n("#cancel-edit-picture-button"),l=n("#crop-and-save"),a=n("#nexus-file-upload-wrong-filetype"),y=n("#nexus-file-upload-small-image"),p=n("#nexus-file-upload-large-image"),it=n("#nexus-upload-new-image"),w=n("#nexus-change-picture-panel"),b=n("#nexus-file-cropping-info"),k,s,i,h,c,d=function(){var n=new Image;n.src=t.attr("src");var r=n.naturalWidth,u=e.find(".jcrop-holder"),f=u.width(),i=r/f;return i>1?i:1},g=function(n){s=n.x;i=n.x2;h=n.y;c=n.y2},rt=function(){n(".nexus-flash-messages").hide()},nt=function(){e.show();b.show();t.attr("src","");nexus.currentUserAccountName==undefined?(v(),t.attr("src",nexus.admintoolapi+"user/"+nexus.currentUserAccountName+"/picture-temp")):t.attr("src",nexus.admintoolapi+"user/"+nexus.currentUserAccountName+"/picture-temp");t.load(function(){var n=bt(t,y,p);t.Jcrop({setSelect:[96,96,0,0],minSize:[n,n],aspectRatio:1,boxWidth:800,boxHeight:600,onSelect:g},function(){k=this})})},r;u.on("click",function(){w.show();f.show();o.show();u.hide()});o.on("click",function(){location.reload()});l.on("click",function(){var n,t;if(i){n=1;t=/Chrome/i.test(navigator.appVersion);n=window.chrome||t?d():1;var r=Math.floor(s*n),u=Math.floor(i*n),f=Math.floor(h*n),e=Math.floor(c*n),o="user/picture/crop-and-enable/"+r+"/"+f+"/"+u+"/"+e;nexus.admintoolRequest(o,"PUT").then(reloadPage)}});r=!1;r=wt();n("#fileupload").fileupload({forceIframeTransport:r,url:nexus.admintoolapi+"user/picture",replaceFileInput:!1,acceptFileTypes:/(\.|\/)(jpe?g|png)$/i,crossDomain:!0,beforeSend:function(n){n.setRequestHeader("Authorization","Bearer "+bearertoken)},success:function(){f.hide();nt()},fail:function(n,t){nexus.log(jsclient.loglevel,n);nexus.log(jsclient.loglevel,t)},done:function(n,t){nexus.log(jsclient.loglevel,t)}}).on("fileuploadprocessalways",function(n,t){var i=t.files[t.index];t.files.error&&i.error&&(nexus.log(jsclient.loglevel,i.error),a.show())});n("#fileupload").fileupload("option","redirect",_spPageContextInfo.webAbsoluteUrl+"/layouts/15/Nexus/fileUploadTemplate/result.html?%s")};g();nt();ExecuteOrDelayUntilScriptLoaded(window.executeAfterAngularJSloaded(),"angular.js");AppLoad.addEventListener("PersonalInfowidget",onLoadFunctionsForMyProfile);AppLoad.addEventListener("AboutMeWidget",aboutMeInfoWidgetPostLoad);AppLoad.addEventListener("MyContactsWidget",applyUserPictureUrl_MyContact);AppLoad.addEventListener("ProjectMembersWidget",applyUserPictureUrl_ProjectMembers);AppLoad.addEventListener("MycolleaguesWidget",applyUserPictureUrl_Mycolleague);AppLoad.addEventListener("MyEquipmentWidget",applyScrollButtons_MyEquipment);window.formatDate=function(n){return new Date(n,"dd-MM-yyyy")}});nexus=nexus||{};jQuery(document).ready(function(){"use strict";function t(t,i,r){n(t).empty();n.each(i,function(i,u){var f=n.grep(r,function(n){return n.ID==u.ID});f.length==1?n(t).append(n("<option><\/option>").attr("value",u.ID).text(u.Name).attr("selected",!0)):n(t).append(n("<option><\/option>").attr("value",u.ID).text(u.Name))});var u=[],f=[],e=[];n.grep(r,function(n){f.push(n.ID)});n.grep(i,function(n){e.push(n.ID)});n.grep(f,function(t){if(n.inArray(t,e)==-1){var i=n.grep(r,function(n){return n.ID==t})[0];u.push(i)}});console.log(u);u.length>=1&&n.each(u,function(i,r){n(t).append(n("<option><\/option>").attr("value",r.ID).text(r.Name).attr("selected",!0))});n(t).pqSelect("refreshData")}function r(t,r){n("#selTitle").val(t.Gender);n("#PrsnlInfoFirstName").val(t.FirstName);n("#PrsnlInfoLastName").val(t.LastName);n("#PrsnlInfoMiddleName").val(t.MiddleName);n("#N_PrsnlInfoPhone").val(t.Phone);n("#N_PrsnlInfoMobilePhone").val(t.MobilePhone);n("#PrsnlInfoJobTitle").val(t.JobTitle);n("#PrsnlInfoEmail").val(t.Email);r&&(n("#dvInternalDeputy").val(t.Deputy),n("#PrsnlInfoAbsentFrom").val(i(t.AbsentFrom)),n("#PrsnlInfoAbsentTo").val(i(t.AbsentTo)),n("#spInternalDeputy").html(t.DeputyName),n("#spAbsentFrom").html(t.AbsentFromAsString),n("#spAbsentTo").html(t.AbsentToAsString),nexus.loadDeputies(t.Deputy));n("#spFirstName").html(t.FirstName);n("#spLastName").html(t.LastName);n("#spMiddleName").html(t.MiddleName);n("#spPhone").html(t.Phone);n("#spMobilePhone").html(t.MobilePhone);n("#spJobTitle").html(t.JobTitle);n("#spEmail").html(t.Email);n("#spTitle").html(t.Gender);nexus.togglePersonalInfoButtons()}function i(n){var t=new Date(n),i=t.getMonth()+1,r=i<10?"-0":"-";return""+t.getFullYear()+r+i.toString()+"-"+t.getDate()}function u(t){n("#CompInfoCompanyName").val(t.CompanyData.Company);n("#CompInfoAddress").val(t.CompanyData.Address);n("#CompInfoPostCode").val(t.CompanyData.PostCode);n("#CompInfoCity").val(t.CompanyData.City);n("#dvCompnyCountries").val(t.CompanyData.Country);n("#CompInfoSupplierID").val(t.CompanyData.SupplierID);n("#CompInfoCustomerID").val(t.CompanyData.CustomerID);n("#CompInfoCompanyPhone").val(t.CompanyData.CompanyPhone);n("#CompInfoWeb").val(t.CompanyData.Web);n("#spCompanyAddress").html(t.CompanyData.Address);n("#spCompanyPostCode").html(t.CompanyData.PostCode);n("#spCompanyCity").html(t.CompanyData.City);n("#spCompanyCountry").html(t.CompanyData.Country);n("#spCompSupplierID").html(t.CompanyData.SupplierID);n("#spCompCustomerID").html(t.CompanyData.CustomerID);n("#spCompanyPhone").html(t.CompanyData.CompanyPhone);n("#spCompanyEmail").html(t.CompanyData.Web);n("#spCompanyName").html(t.CompanyData.Company);nexus.toggleCompanyInfoButtons()}function f(t){n("#spAboutMeDesc").html(t.Description);n("#txtAreaDescription").val(t.Description);n("#divProfileAboutMe").toggleClass("ng-hide");n("#divProfileAboutMeEdit").toggleClass("ng-hide");n("#nexus-AboutMe-Edit").toggleClass("ng-hide");n("#nexus-AboutMe-cancel").toggleClass("ng-hide");n("#nexus-AboutMe-save").toggleClass("ng-hide")}function e(){n("#btnEditProfPicture").removeClass("ng-hide");n("#btnProfEditCancel").addClass("ng-hide");n("#profilePicUpload").addClass("ng-hide");n("#btnSaveCropped").addClass("ng-hide");window.ClearCoordinates()}function o(){window.ClearCurrenCanvas();nexus.showDialog("Alert","Failed to save the new picture, contact administrator");n("#btnEditProfPicture").toggleClass("ng-hide");n("#btnProfEditCancel").toggleClass("ng-hide");n("#profilePicUpload").toggleClass("ng-hide");n("#btnSaveCropped").toggleClass("ng-hide");window.drawProfilePicture()}function s(t,i){n("#dvInternalDeputy").empty();n.each(t,function(t,r){i==r.ID?n("#dvInternalDeputy").append(n("<option><\/option>").attr("value",r.ID).text(r.Name).attr("selected",!0)):n("#dvInternalDeputy").append(n("<option><\/option>").attr("value",r.ID).text(r.Name))})}function h(t,i){n("#dvCompnyCountries").empty();n.each(t,function(t,r){i==r.Name?n("#dvCompnyCountries").append(n("<option><\/option>").attr("value",r.Name).text(r.Name).attr("selected",!0)):n("#dvCompnyCountries").append(n("<option><\/option>").attr("value",r.Name).text(r.Name))});n("#divPersCmpInfoDisplayform").toggleClass("ng-hide");n("#divPersCmpInfoEditform").toggleClass("ng-hide");n("#nexus-PersCompinfo-suggest").toggleClass("ng-hide");n("#nexus-PersCompinfo-cancel").toggleClass("ng-hide");n("#nexus-PersCompinfo-save").toggleClass("ng-hide")}var n=jQuery;nexus.getBearerTokenHeader=function(){return{Authorization:"Bearer "+bearertoken}};nexus.admintoolRequest=function(t,i){return n.support.cors=!0,n.ajax({type:i,url:nexus.admintoolapi+t,headers:nexus.getBearerTokenHeader(),dataType:"json"}).then(function(n){return n},function(n,t,i){return console.log("Error: "+i),n})};nexus.getNotifications=function(t){n.support.cors=!0;n.ajax({type:"GET",url:nexus.admintoolapi+"notification",headers:nexus.getBearerTokenHeader(),success:function(n){t(n)},error:function(n,t,i){console.log("Error: "+i)},dataType:"json"})};nexus.clearNotifications=function(){n.support.cors=!0;n.ajax({type:"PUT",url:nexus.admintoolapi+"notification/clear",headers:nexus.getBearerTokenHeader(),success:function(n){callback(n)},error:function(n,t,i){console.log("Error: "+i)},dataType:"json"})};nexus.saveMyContactsComment=function(){var i=n("#nexus-my-contacts-details-comment textarea").attr("name"),t=n("#nexus-my-contacts-details-comment textarea").val();if(n(".nexus-my-contacts-person[data-id="+i+"]").data("comment",t),location.hostname==="dev"){console.log("Comment saved: "+t);return}n.support.cors=!0;n.ajax({type:"PUT",url:nexus.admintoolapi+"user/contact/"+i,headers:nexus.getBearerTokenHeader(),data:t,success:function(){console.log("Comment saved successfully!")},error:function(n,t,i){console.log("Could not save comment: "+i)},dataType:"json"})};nexus.saveCalloutComment=function(t,i){n.support.cors=!0;n.ajax({type:"PUT",url:nexus.admintoolapi+"user/comment/"+t,headers:nexus.getBearerTokenHeader(),data:i,success:function(){console.log("Comment saved successfully!")},error:function(n,t,i){console.log("Could not save comment: "+i)},dataType:"json"})};nexus.getMainMenu=function(t){n.support.cors=!0;n.ajax({type:"GET",url:nexus.admintoolapi+"navigation",headers:nexus.getBearerTokenHeader(),success:function(n){t(n)},error:function(n,t,i){console.log("Error: "+i)},dataType:"json"})};nexus.getMainMenu2=function(t){n.support.cors=!0;n.ajax({type:"GET",url:nexus.admintoolapi+"user/app/projects",headers:nexus.getBearerTokenHeader(),success:function(n){t(n)},error:function(n,t,i){console.log("Error: "+i)},dataType:"json"})};nexus.loadComment=function(t,i){n.support.cors=!0;n.ajax({type:"GET",url:nexus.admintoolapi+"user/comment/"+i,headers:nexus.getBearerTokenHeader(),success:function(n){n!=null?t.val(n.Text):t.val("")},error:function(n,t,i){console.log("Error: "+i)},dataType:"json"})};nexus.getInfobarData=function(t){n.support.cors=!0;n.ajax({type:"GET",url:nexus.admintoolapi+"user/infobar",headers:nexus.getBearerTokenHeader(),success:function(n){t(n)},error:function(n,t,i){console.log("Error: "+i)},dataType:"json"})};nexus.getNewsData=function(t){n.support.cors=!0;n.ajax({type:"GET",url:nexus.admintoolapi+"user/news",headers:nexus.getBearerTokenHeader(),success:function(n){t(n)},error:function(n,t,i){console.log("Error: "+i)},dataType:"json"})};nexus.getMyProfile=function(t,i){n.support.cors=!0;n.ajax({type:"GET",url:nexus.admintoolapi+"user",headers:nexus.getBearerTokenHeader(),success:function(n){t?f(n):r(n,i)},error:function(n,t,i){console.log("Error: "+i)},dataType:"json"})};nexus.getMyCompanyInfo=function(){n.support.cors=!0;n.ajax({type:"GET",url:nexus.admintoolapi+"user",headers:nexus.getBearerTokenHeader(),success:function(n){u(n)},error:function(n,t,i){console.log("Error: "+i)},dataType:"json"})};nexus.UpdatePersonalInfo=function(t){n.support.cors=!0;n.ajax({type:"PUT",url:nexus.admintoolapi+"user/personalinfo?"+t,headers:nexus.getBearerTokenHeader(),success:function(){nexus.getMyProfile(!1,!1);nexus.showDialog("Information","Personal information saved successfully!");console.log("Personal info saved successfully!")},error:function(n,t,i){nexus.showDialog("Alert","Failed to save your details, Please contact administrator.");console.log("Could not save personal info: "+i)}})};nexus.UpdatePersonalInfoInternalUser=function(t){n.support.cors=!0;n.ajax({type:"PUT",url:nexus.admintoolapi+"user/internal",contenttype:"application/json;charset=utf-8",headers:nexus.getBearerTokenHeader(),data:t,success:function(){nexus.getMyProfile(!1,!0);nexus.showDialog("Information","Personal information saved successfully!");console.log("Personal info saved successfully!")},error:function(n,t,i){nexus.showDialog("Alert","Failed to save your details, Please contact administrator.");console.log("Could not save personal info: "+i)}})};nexus.UpdateAboutMedescription=function(t,i){n.support.cors=!0;n.ajax({type:"PUT",url:nexus.admintoolapi+"user/description?"+t,headers:nexus.getBearerTokenHeader(),success:function(){nexus.getMyProfile(!0,i);nexus.showDialog("Information","Description information saved successfully!");console.log("About me description info saved successfully!")},error:function(n,t,i){nexus.showDialog("Alert","Failed to save your details, Please contact administrator.");console.log("Could not save personal info: "+i)}})};nexus.UpdateMyProfilePicture=function(t){n.support.cors=!0;n.ajax({type:"POST",url:nexus.admintoolapi+"user/picture",headers:nexus.getBearerTokenHeader(),processData:!1,contentType:!1,data:t,success:function(n){e(n);console.log("Picture saved successfully")},error:function(n,t,i){o(result);console.log("Could not save picture: "+i)}})};nexus.UpdateUserInterests=function(t){console.log(t);n.support.cors=!0;n.ajax({type:"PUT",url:nexus.admintoolapi+"user/interest",contentType:"application/json",headers:nexus.getBearerTokenHeader(),data:t,success:function(){n("#txtnewInterest").val("");nexus.showDialog("Information","Personal interests info saved successfully!");console.log("Personal interests info saved successfully!")},error:function(n,t,i){nexus.showDialog("Alert","Failed to save your details, Please contact administrator.");console.log("Could not save Interest: "+i)}})};nexus.UpdateUserEquipments=function(t){console.log(t);n.support.cors=!0;n.ajax({type:"PUT",url:nexus.admintoolapi+"user/masterdata",contentType:"application/json",headers:nexus.getBearerTokenHeader(),data:t,success:function(){nexus.showDialog("Information","Equipment suggestions submitted successfully!");console.log("Equipment suggestions submitted successfully!")},error:function(n,t,i){nexus.showDialog("Alert","Failed to save Equipments - Ships details, Please contact administrator.");console.log("Could not save Equipments - Ships: "+i)}})};nexus.UpdateCompanyInfo=function(t){n.support.cors=!0;n.ajax({type:"PUT",url:nexus.admintoolapi+"user/companyinfo",contenttype:"application/json;charset=utf-8",headers:nexus.getBearerTokenHeader(),data:t,success:function(){nexus.getMyCompanyInfo();console.log("Company info saved successfully!")},error:function(n,t,i){nexus.showDialog("Alert","Failed to save your details, Please contact administrator.");console.log("Could not save company info suggestions: "+i)}})};nexus.SuggestNewUserInterests=function(t){n.support.cors=!0;n.ajax({type:"PUT",url:nexus.admintoolapi+"user/interest",contentType:"application/json",headers:nexus.getBearerTokenHeader(),data:JSON.stringify(t),success:function(){nexus.showDialog("Information","New interests suggestion added successfully!");console.log("New interests suggestion added successfully!")},error:function(n,t,i){nexus.showDialog("Alert","Failed to save your details, Please contact administrator.");console.log("Could not save Interest: "+i)}})};nexus.loadUserIntrests=function(){n.support.cors=!0;n.ajax({type:"GET",url:nexus.admintoolapi+"user/Interest",headers:nexus.getBearerTokenHeader(),success:function(n){window.userinterests=n;nexus.loadAllInterests(n)},error:function(n,t,i){console.log("Error: "+i)},dataType:"json"})};nexus.loadAllInterests=function(i){n.support.cors=!0;n.ajax({type:"GET",url:nexus.admintoolapi+"list/Interest",headers:nexus.getBearerTokenHeader(),success:function(n){window.AllInterests=n;t("#dvInterests",n,i)},error:function(n,t,i){console.log("Error: "+i)},dataType:"json"})};nexus.loadUserShipsEquipments=function(){n.support.cors=!0;n.ajax({type:"GET",url:nexus.admintoolapi+"user",headers:nexus.getBearerTokenHeader(),success:function(n){n.Equipment&&n.hasOwnProperty("Equipment")&&(n.HasAssignedMasterData.Ship&&(window.userEquipShips=n.Equipment[0].Children,nexus.loadAllEquipShips(window.userEquipShips)),n.HasAssignedMasterData.Engine&&(window.userEquipEngines=n.Equipment[2].Children,nexus.loadAllEquipEngines(window.userEquipEngines)),n.HasAssignedMasterData.Plant&&(window.userPowerPlants=n.Equipment[1].Children,nexus.loadAllPowerPlants(window.userPowerPlants)),n.HasAssignedMasterData.Turbocharger&&(window.userTurbochargers=n.Equipment[3].Children,nexus.loadAllTurboChargers(window.userTurbochargers)))},error:function(n,t,i){console.log("Error: "+i)},dataType:"json"})};nexus.loadAllEquipShips=function(i){n.support.cors=!0;n.ajax({type:"GET",url:nexus.admintoolapi+"user/availablemasterdata/ship",headers:nexus.getBearerTokenHeader(),success:function(n){window.AllEquipShips=n;t("#dvEquipmntShips",n,i)},error:function(n,t,i){console.log("Error: "+i)},dataType:"json"})};nexus.loadAllEquipEngines=function(i){n.support.cors=!0;n.ajax({type:"GET",url:nexus.admintoolapi+"user/availablemasterdata/engine",headers:nexus.getBearerTokenHeader(),success:function(n){window.AllEquipEngines=n;t("#dvEquipmntEngTypes",n,i)},error:function(n,t,i){console.log("Error: "+i)},dataType:"json"})};nexus.loadAllPowerPlants=function(i){n.support.cors=!0;n.ajax({type:"GET",url:nexus.admintoolapi+"user/availablemasterdata/plant",headers:nexus.getBearerTokenHeader(),success:function(n){window.AllPlants=n;t("#dvPowerplants",n,i)},error:function(n,t,i){console.log("Error: "+i)},dataType:"json"})};nexus.loadAllTurboChargers=function(i){n.support.cors=!0;n.ajax({type:"GET",url:nexus.admintoolapi+"user/availablemasterdata/turbocharger",headers:nexus.getBearerTokenHeader(),success:function(n){window.AllTurbochargers=n;t("#dvTurbochargers",n,i)},error:function(n,t,i){console.log("Error: "+i)},dataType:"json"})};nexus.togglePersonalInfoButtons=function(){n("#divPersonalInfoEditform").toggleClass("ng-hide");n("#divPersonalInfoDisplayform").toggleClass("ng-hide");n("#nexus-Personalinfo-edit").toggleClass("ng-hide");n("#nexus-Personalinfo-cancel").toggleClass("ng-hide");n("#nexus-Personalinfo-save").toggleClass("ng-hide")};nexus.toggleInterestButtons=function(){n("#nexus-Get-Interests").toggleClass("ng-hide");n("#nexus-PersonalInterests-save").toggleClass("ng-hide");n("#nexus-Cancel-Interests").toggleClass("ng-hide");n("#dvAddIntersts").toggleClass("ng-hide")};nexus.toggleCompanyInfoButtons=function(){n("#divPersCmpInfoDisplayform").toggleClass("ng-hide");n("#divPersCmpInfoEditform").toggleClass("ng-hide");n("#nexus-PersCompinfo-suggest").toggleClass("ng-hide");n("#nexus-PersCompinfo-cancel").toggleClass("ng-hide");n("#nexus-PersCompinfo-save").toggleClass("ng-hide")};nexus.toggleEquipmentInfoButtons=function(){n("#dvAddEquipmentShips").toggleClass("ng-hide");n("#dvAddEquipmentEngines").toggleClass("ng-hide");n("#dvAddPowerPlants").toggleClass("ng-hide");n("#dvAddTurbochargers").toggleClass("ng-hide");n("#nexus-EquipmentInfo-suggest").toggleClass("ng-hide");n("#nexus-EquipmentInfo-save").toggleClass("ng-hide");n("#nexus-EquipmentInfo-cancel").toggleClass("ng-hide")};nexus.loadCountries=function(t){n.support.cors=!0;n.ajax({type:"GET",url:nexus.admintoolapi+"list/country",headers:nexus.getBearerTokenHeader(),success:function(n){h(n,t)},error:function(n,t,i){console.log("Error - fetching countries: "+i)},dataType:"json"})};nexus.loadDeputies=function(t){n.support.cors=!0;n.ajax({type:"GET",url:nexus.admintoolapi+"user/admin",headers:nexus.getBearerTokenHeader(),success:function(n){s(n,t)},error:function(n,t,i){console.log("Error - fetching deputies: "+i)},dataType:"json"})};nexus.logOnServer=function(t,i,r,u){console.log("Error: "+i+r);t!=""&&t!=null&&i!=""&&i!=null&&(n.support.cors=!0,n.ajax({type:"POST",url:nexus.admintoolapi+"log/Client/"+t,data:i,headers:nexus.getBearerTokenHeader(),success:function(n){u(n)},error:function(n,t,i){console.log("Error while logging on server: "+i)},dataType:"json"}))}});